<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحة الاشتراك</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ionicons@5.5.2/dist/css/ionicons.min.css">
   <link rel='stylesheet' href='index22.css'>
</head>
<body>
    <h1>اأشترك معنا </h1>
    <form id="signupForm">
        <label for="email">البريد الإلكتروني:</label>
        <input type="email" id="email" required>
        <br><br>
        <label for="password">كلمة المرور:</label>
        <input type="password" id="password" required>
        <br><br>
        <button type="submit">اشتراك</button>
    </form>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
    <script>
        // إعداد Supabase
        const supabaseUrl = 'https://ciqpdavzvndopznczevf.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNpcXBkYXZ6dm5kb3B6bmN6ZXZmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzY5NjY1NTEsImV4cCI6MjA1MjU0MjU1MX0.RxLSUcAzgt8G4QprXc-abNW-kecXh17Q6k-xUbaMo_g'; // ضع مفتاح Supabase الخاص بك هنا
        const supabase = createClient(supabaseUrl, supabaseKey);

        // التعامل مع حدث إرسال النموذج
        document.getElementById("signupForm").addEventListener("submit", async function(event) {
            event.preventDefault();  // منع إعادة تحميل الصفحة

            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value;

            try {
                const { user, error } = await supabase.auth.signUp({
                    email,
                    password
                });

                if (error) {
                    throw error;  // إذا كان هناك خطأ
                }

                alert("تم الاشتراك بنجاح! تم إرسال رابط تفعيل إلى بريدك الإلكتروني.");
                window.location.href = "login.html";  // التوجيه إلى صفحة تسجيل الدخول
            } catch (error) {
                console.error("Error signing up:", error);
                alert("فشل الاشتراك: " + error.message);  // عرض رسالة الخطأ للمستخدم
            }
        });
    </script>
</body>
</html>
